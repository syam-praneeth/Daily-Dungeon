"use strict";(self.webpackChunkdaily_dungeon_frontend=self.webpackChunkdaily_dungeon_frontend||[]).push([[813],{3813:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var n=a(2555),i=a(5043),s=a(8729),l=a(1926),r=a(6523),o=a(579);function d(e){let{data:t=[],width:a=300,height:n=80,stroke:s="#6366f1",fill:l="rgba(99,102,241,0.12)",strokeWidth:r=2}=e;const{path:d,area:c}=(0,i.useMemo)(()=>{if(!t||0===t.length)return{path:"",area:""};const e=t.length,i=Math.max(1,...t),s=Math.min(0,...t),l=Math.max(1,i-s),r=e>1?a/(e-1):0,o=t.map((e,t)=>[t*r,n-(e-s)/l*n]);return{path:o.map((e,t)=>{let[a,n]=e;return 0===t?"M ".concat(a,",").concat(n):"L ".concat(a,",").concat(n)}).join(" "),area:["M 0,".concat(n),...o.map((e,t)=>{let[a,n]=e;return"L ".concat(a,",").concat(n)}),"L ".concat(a,",").concat(n),"Z"].join(" ")}},[t,a,n]);return(0,o.jsxs)("svg",{width:a,height:n,viewBox:"0 0 ".concat(a," ").concat(n),children:[c?(0,o.jsx)("path",{d:c,fill:l,stroke:"none"}):null,d?(0,o.jsx)("path",{d:d,fill:"none",stroke:s,strokeWidth:r,strokeLinecap:"round",strokeLinejoin:"round"}):null]})}function c(e){let{values:t=[],labels:a=[],width:n=420,height:s=140,barGap:l=4,color:r="#22c55e",showAxis:d=!1,maxValue:c}=e;const{bars:f,xLabels:g}=(0,i.useMemo)(()=>{const e=t.length;if(!e)return{bars:[],xLabels:[]};const i=null!==c&&void 0!==c?c:Math.max(1,...t),r=Math.max(1,Math.floor((n-(e-1)*l)/e));let o=0;return{bars:t.map(e=>{const t=Math.round(Math.max(0,e)/i*(s-2)),a={x:o,y:s-t,w:r,h:t};return o+=r+l,a}),xLabels:a&&a.length===e?a:Array(e).fill("")}},[t,a,n,s,l,c]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("svg",{width:n,height:s,viewBox:"0 0 ".concat(n," ").concat(s),children:[d?(0,o.jsxs)("g",{children:[(0,o.jsx)("line",{x1:0,y1:s-1,x2:n,y2:s-1,stroke:"#e5e7eb"}),(0,o.jsx)("line",{x1:0,y1:0,x2:0,y2:s,stroke:"#e5e7eb"})]}):null,f.map((e,t)=>(0,o.jsx)("rect",{x:e.x,y:e.y,width:e.w,height:e.h,rx:3,fill:r,opacity:.9},t))]}),g.some(Boolean)?(0,o.jsx)("div",{style:{display:"flex",gap:l,marginTop:6},children:g.map((e,t)=>(0,o.jsx)("div",{style:{width:"".concat(Math.max(1,Math.floor((n-(g.length-1)*l)/g.length)),"px"),textAlign:"center",fontSize:10,color:"#6b7280"},children:e},t))}):null]})}var f=a(9778);const g={LeetCode:{bg:"#0f0f0f",fg:"#f59e0b"},CodeChef:{bg:"#3b2f2f",fg:"#f5e6ca"},Codeforces:{bg:"#0b2e5b",fg:"#ef4444"},Striver:{bg:"#0b3d1f",fg:"#34d399"}};function m(e){let{platform:t,link:a,stats:n,onEditStats:s}=e;const[l,r]=(0,i.useState)(!1),d=g[t]||{bg:"#111827",fg:"#e5e7eb"},c="string"===typeof a&&/^https?:\/\//i.test(a);return(0,o.jsxs)("div",{className:"card",style:{background:"linear-gradient(135deg, ".concat(d.bg," 0%, #111 100%)"),color:d.fg},children:[(0,o.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,o.jsx)("h3",{style:{margin:0},children:t})}),n?(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:8},children:[Object.entries(n).map(e=>{let[t,a]=e;return a&&"lastUpdated"!==t?(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:12,opacity:.8},children:t}),(0,o.jsx)("div",{style:{fontWeight:600},children:a})]},t):null}),n.lastUpdated&&(0,o.jsxs)("div",{style:{gridColumn:"1 / -1",fontSize:12,opacity:.8},children:["Last updated: ",new Date(n.lastUpdated).toLocaleString()]})]}):(0,o.jsx)("div",{className:"muted",children:"Stats not provided."}),(0,o.jsxs)("div",{style:{display:"flex",gap:8,marginTop:12,alignItems:"center"},children:[c?(0,o.jsx)("a",{className:"button",href:a,target:"_blank",rel:"noreferrer",children:"View Profile"}):(0,o.jsx)("span",{className:"muted",style:{fontSize:12},children:"Link not set"}),s?(0,o.jsx)("button",{className:"button",onClick:()=>r(e=>!e),children:l?"Hide":"Edit Stats"}):null]}),s&&l?(0,o.jsx)("div",{style:{marginTop:12},children:s}):null]})}var u=a(1628),h=a(6775);const b={leetcode:{name:"LeetCode",bg:"#0f0f0f",bg2:"#1e1e1e",cardFg:"#e5e7eb",fg:"#f59e0b",icon:h.efW},codechef:{name:"CodeChef",bg:"#3b2f2f",bg2:"#5a4740",cardFg:"#f5e6ca",fg:"#f5e6ca",icon:h.KKb},codeforces:{name:"Codeforces",bg:"#0b2e5b",bg2:"#0b2e5b",cardFg:"#e5e7eb",fg:"#ef4444",icon:h.AfY},smartinterviews:{name:"SmartInterviews",bg:"#ffffff",bg2:"#fef3c7",cardFg:"#111827",fg:"#eab308",icon:u.z5h},striverSheet:{name:"Striver Sheet",bg:"#064e3b",bg2:"#065f46",cardFg:"#e5e7eb",fg:"#34d399",icon:h.efW},linkedin:{name:"LinkedIn",bg:"#0a66c2",bg2:"#0f6bdc",cardFg:"#ffffff",fg:"#ffffff",icon:u.QEs},github:{name:"GitHub",bg:"#000000",bg2:"#111111",cardFg:"#e5e7eb",fg:"#e5e7eb",icon:u.hL4},discord:{name:"Discord",bg:"#5865F2",bg2:"#4f5ae0",cardFg:"#ffffff",fg:"#ffffff",icon:u.O4U},spotify:{name:"Spotify",bg:"#1DB954",bg2:"#18a74a",cardFg:"#0b0b0b",fg:"#0b0b0b",icon:u.geR},eduprime:{name:"EduPrime",bg:"#1e3a8a",bg2:"#312e81",cardFg:"#c7d2fe",fg:"#c7d2fe",icon:u.DSS},youtube:{name:"YouTube",bg:"#ff0000",bg2:"#dc2626",cardFg:"#ffffff",fg:"#ffffff",icon:u.Vk6},gmail:{name:"Gmail",bg:"#ffffff",bg2:"#f3f4f6",cardFg:"#111827",fg:"#111827",icon:h.nP5},atcoder:{name:"AtCoder",bg:"#0f172a",bg2:"#111827",cardFg:"#a5f3fc",fg:"#a5f3fc",icon:u.FSj},spoj:{name:"SPOJ",bg:"#1f2937",bg2:"#111827",cardFg:"#60a5fa",fg:"#60a5fa",icon:h.AfY},hackerrank:{name:"HackerRank",bg:"#0b3d2a",bg2:"#052e22",cardFg:"#2ec866",fg:"#2ec866",icon:h.Z8u},interviewbit:{name:"InterviewBit",bg:"#0b2e5b",bg2:"#073052",cardFg:"#c7f9ff",fg:"#14b8a6",icon:u._yv}};const p=function(e){let{keyName:t,size:a=44,radius:n=10,ariaLabel:i}=e;const s=b[t]||{name:t,fg:"#e5e7eb",bg:"#111827",icon:u.DSS},l=s.icon||u.DSS;return(0,o.jsx)("div",{role:"img","aria-label":i||s.name,style:{width:a,height:a,borderRadius:n,background:s.bg,color:s.fg,display:"grid",placeItems:"center"},children:(0,o.jsx)(l,{size:Math.round(.6*a)})})},x=["leetcode","codechef","codeforces","smartinterviews","striverSheet","linkedin","github","discord","spotify","eduprime","youtube","gmail","atcoder","spoj","hackerrank","interviewbit"];function v(e){let{links:t,onEdit:a,loading:i=!1}=e;const s=x.filter(e=>b[e]);return(0,o.jsxs)("div",{children:[(0,o.jsx)("style",{children:"\n        .links-grid { display:grid; gap:24px; }\n        @media (min-width: 1024px){ .links-grid { grid-template-columns: repeat(12, 1fr); } }\n        @media (min-width: 768px) and (max-width: 1023px){ .links-grid { grid-template-columns: repeat(8, 1fr); } }\n        @media (max-width: 767px){ .links-grid { grid-template-columns: repeat(1, 1fr); } }\n  .link-card { grid-column: span 3; background: #0b1220; color:#e5e7eb; border-radius: 20px; padding: 20px; box-shadow: 0 10px 30px -12px rgba(0,0,0,.5); display:flex; align-items:center; justify-content:space-between; min-height:132px; transition: transform .15s ease, box-shadow .15s ease; outline: none; }\n        .link-card:hover { transform: translateY(-2px); }\n        .link-card:focus-visible { box-shadow: 0 0 0 3px #a78bfa; }\n        @media (min-width: 1280px){ .link-card { grid-column: span 3; } }\n        @media (min-width: 1024px) and (max-width: 1279px){ .link-card { grid-column: span 4; } }\n        @media (min-width: 768px) and (max-width: 1023px){ .link-card { grid-column: span 4; } }\n        @media (max-width: 767px){ .link-card { grid-column: span 1; } }\n        .link-meta { display:flex; align-items:center; gap:14px; min-width:0; }\n        .link-title { font-weight:700; }\n        .link-sub { font-size:12px; opacity:.9; color:#9ca3af }\n        .btn { border:1px solid #374151; background:#111827; color:#e5e7eb; border-radius:10px; padding:8px 12px; }\n        .btn.primary { background:#6366f1; border-color:#6366f1; color:#fff; }\n        .btn:disabled { opacity:.5; cursor:not-allowed; }\n        .skeleton { background: linear-gradient(90deg, #111827, #1f2937, #111827); background-size: 200% 100%; animation: shimmer 1.2s infinite; border-radius: 16px; height:132px; }\n        @keyframes shimmer { 0%{ background-position: 200% 0 } 100%{ background-position: -200% 0 } }\n      "}),(0,o.jsx)("div",{className:"links-grid",role:"list",children:i?Array.from({length:s.length||8}).map((e,t)=>(0,o.jsx)("div",{className:"skeleton"},t)):s.map(e=>{const i=b[e],s=(null===t||void 0===t?void 0:t[e])||"",l=!!s;let r="";try{l&&(r=new URL(s).hostname)}catch(c){}const d=(0,n.A)((0,n.A)({},function(e){const t=b[e];return t?{background:"linear-gradient(135deg, ".concat(t.bg," 0%, ").concat(t.bg2||t.bg," 100%)"),color:t.cardFg||"#e5e7eb"}:{background:"#0b1220",color:"#e5e7eb"}}(e)),{},{boxShadow:l?"0 12px 32px -12px ".concat(i.fg,"33"):void 0});return(0,o.jsxs)("div",{className:"link-card",style:d,tabIndex:0,role:"listitem","aria-label":"".concat(i.name," link card"),children:[(0,o.jsxs)("div",{className:"link-meta",children:[(0,o.jsx)("div",{style:{flex:"0 0 auto"},children:(0,o.jsx)(p,{keyName:e,ariaLabel:"".concat(i.name," icon")})}),(0,o.jsxs)("div",{style:{minWidth:0},children:[(0,o.jsx)("div",{className:"link-title",children:i.name}),(0,o.jsx)("div",{className:"link-sub",children:l?r:"Link not added"})]})]}),l?(0,o.jsx)("a",{className:"btn primary",href:s,target:"_blank",rel:"noreferrer","aria-label":"Visit ".concat(i.name),children:"Visit"}):(0,o.jsx)("button",{className:"btn",onClick:a,"aria-label":"Add ".concat(i.name," link"),children:"Add Link"})]},e)})})]})}const y=[{key:"leetcode",label:"LeetCode"},{key:"codechef",label:"CodeChef"},{key:"codeforces",label:"Codeforces"},{key:"hackerrank",label:"HackerRank"},{key:"spoj",label:"SPOJ"},{key:"interviewbit",label:"InterviewBit"},{key:"atcoder",label:"AtCoder"},{key:"smartinterviews",label:"SmartInterviews"},{key:"striverSheet",label:"Striver Sheet"},{key:"linkedin",label:"LinkedIn"},{key:"github",label:"GitHub"},{key:"discord",label:"Discord"},{key:"spotify",label:"Spotify"},{key:"eduprime",label:"EduPrime"},{key:"youtube",label:"YouTube"},{key:"gmail",label:"Gmail"}];function k(e){let{open:t,initial:a,onClose:s,onSave:l}=e;const[r,d]=(0,i.useState)({}),[c,f]=(0,i.useState)({});if((0,i.useEffect)(()=>{d(a||{}),f({})},[a,t]),!t)return null;return(0,o.jsx)("div",{role:"dialog","aria-modal":"true",className:"modal-backdrop",onKeyDown:e=>"Escape"===e.key&&s(),children:(0,o.jsxs)("div",{className:"modal",style:{maxHeight:"80vh",overflow:"auto"},children:[(0,o.jsx)("h3",{style:{marginTop:0},children:"Edit Links"}),(0,o.jsx)("div",{className:"grid",style:{gap:10},children:y.map(e=>(0,o.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,o.jsx)("span",{style:{fontSize:12},children:e.label}),(0,o.jsx)("input",{"aria-label":e.label,placeholder:"https://... (".concat(e.label,")"),value:r[e.key]||"",onChange:t=>d((0,n.A)((0,n.A)({},r),{},{[e.key]:t.target.value}))}),c[e.key]&&(0,o.jsx)("span",{role:"alert",style:{color:"#ef4444",fontSize:12},children:c[e.key]})]},e.key))}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[(0,o.jsx)("button",{className:"button",onClick:s,children:"Cancel"}),(0,o.jsx)("button",{className:"button primary",onClick:()=>{(()=>{const e={};for(const t of y){const a=(r[t.key]||"").trim();a&&/["'<>\s]/.test(a)&&(e[t.key]="Contains invalid characters")}return f(e),0===Object.keys(e).length})()&&l(r)},children:"Save"})]})]})})}function j(e){let{open:t,message:a,onClose:n,duration:s=2500}=e;return(0,i.useEffect)(()=>{if(!t)return;const e=setTimeout(()=>null===n||void 0===n?void 0:n(),s);return()=>clearTimeout(e)},[t,s,n]),t?(0,o.jsx)("div",{style:{position:"fixed",top:16,right:16,zIndex:60},children:(0,o.jsx)("div",{role:"status","aria-live":"polite",style:{background:"#111827",color:"#e5e7eb",border:"1px solid #374151",borderRadius:12,padding:"10px 14px",boxShadow:"0 12px 32px -12px rgba(0,0,0,.5)",maxWidth:360},children:a})}):null}const w=()=>{var e,t,a,g,u,h,b,p,x,y,w,S,C;const{user:N}=(0,i.useContext)(s.c),{streak:A,fetchStreak:L}=(0,i.useContext)(l.P),[D,M]=(0,i.useState)([]),[F,E]=(0,i.useState)({name:(null===N||void 0===N?void 0:N.name)||"",email:(null===N||void 0===N?void 0:N.email)||""}),[T,I]=(0,i.useState)(!1),[z,W]=(0,i.useState)({mode:"manual",links:{},usernames:{},preferences:{showScorecards:!0,theme:"auto"},selfReportedStats:{}}),[R,U]=(0,i.useState)({}),[P,B]=(0,i.useState)(!1),[O,_]=(0,i.useState)(!1),[H,Z]=(0,i.useState)({open:!1,msg:""});(0,i.useEffect)(()=>{null===L||void 0===L||L();const e=new Date,t=new Date;t.setDate(e.getDate()-60);const a="from=".concat(encodeURIComponent(t.toISOString()),"&to=").concat(encodeURIComponent(e.toISOString()));f.A.get("/readingSessions?".concat(a)).then(e=>M(e.data||[])).catch(()=>M([]))},[]);(0,i.useEffect)(()=>{(async()=>{try{I(!0);const e=await f.A.get("/profile/cp");W(e.data||z)}catch(e){}finally{I(!1)}})()},[]);const G=async()=>{try{_(!0);const e=await f.A.get("/profile/links");U(e.data||{})}catch(e){U({})}finally{_(!1)}};(0,i.useEffect)(()=>{G()},[]);const V="Asia/Kolkata",Y=(0,i.useMemo)(()=>(new Date).toLocaleDateString("en-CA",{timeZone:V}),[]),K=(0,i.useMemo)(()=>{const e=new Set;return(A||[]).filter(e=>e.isActive).forEach(t=>{t.date&&e.add((e=>new Date(e).toLocaleDateString("en-CA",{timeZone:V}))(t.date))}),e},[A]),J=(e=>{const t=[],a=new Date("".concat(Y,"T00:00:00+05:30"));for(let n=e-1;n>=0;n--){const e=new Date(a);e.setDate(a.getDate()-n),t.push(e.toLocaleDateString("en-CA",{timeZone:V}))}return t})(30).map(e=>K.has(e)?1:0),Q=J.reduce((e,t)=>e+t,0)/30,q=(0,i.useMemo)(()=>{const e=[];for(let t=0;t<J.length;t++){const a=Math.max(0,t-7+1),n=J.slice(a,t+1),i=n.reduce((e,t)=>e+t,0)/n.length;e.push(Number((100*i).toFixed(0)))}return e},[J]),X=(0,i.useMemo)(()=>{const e=Array(7).fill(0);return D.forEach(t=>{const a=t.date||t.startTime;if(!a)return;const n=new Date(a).toLocaleDateString("en-CA",{timeZone:V}),i=new Date(n+"T00:00:00+05:30").getDay();e[(i+6)%7]+=Math.round((Number(t.duration)||0)/60)}),{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],values:e}},[D]);return(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("h2",{children:"Profile & Settings"}),(0,o.jsx)("style",{children:"\n        .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:50}\n        .modal{background:var(--card-bg, #111827);color:var(--fg, #e5e7eb);padding:16px;border-radius:8px;min-width:320px;max-width:560px;width:100%}\n        .badge{background:#e5e7eb;color:#111;border-radius:999px;padding:2px 8px;font-size:12px}\n        .primary{background:#6366f1;border-color:#6366f1}\n      "}),(0,o.jsx)("div",{className:"card",children:(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:24},children:[(0,o.jsx)("div",{style:{flex:"0 0 auto"},children:(0,o.jsx)(r.A,{value:Q,label:"".concat(Math.round(100*Q),"% consistency"),caption:"Last 30 days",color:"#6366f1"})}),(0,o.jsxs)("div",{style:{flex:1,minWidth:280},children:[(0,o.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:"7-day momentum"}),(0,o.jsx)(d,{data:q,width:420,height:80}),(0,o.jsx)("div",{className:"muted",style:{marginTop:6},children:"Daily activity (1 = active, 0 = inactive) smoothed over 7 days."})]})]})}),(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("div",{className:"muted",children:"Self-reported data only. No external APIs."}),(0,o.jsx)("div",{style:{marginTop:12},children:(0,o.jsxs)("div",{className:"grid-2",style:{gap:12},children:[(0,o.jsx)(m,{platform:"LeetCode",link:null!==(e=z.usernames)&&void 0!==e&&e.leetcode?"https://leetcode.com/".concat(z.usernames.leetcode):(null===(t=z.links)||void 0===t?void 0:t.leetcodeUrl)||"#",stats:null!==(a=z.preferences)&&void 0!==a&&a.showScorecards?null===(g=z.selfReportedStats)||void 0===g?void 0:g.leetcode:null}),(0,o.jsx)(m,{platform:"CodeChef",link:null!==(u=z.usernames)&&void 0!==u&&u.codechef?"https://www.codechef.com/users/".concat(z.usernames.codechef):(null===(h=z.links)||void 0===h?void 0:h.codechefUrl)||"#",stats:null!==(b=z.preferences)&&void 0!==b&&b.showScorecards?null===(p=z.selfReportedStats)||void 0===p?void 0:p.codechef:null}),(0,o.jsx)(m,{platform:"Codeforces",link:null!==(x=z.usernames)&&void 0!==x&&x.codeforces?"https://codeforces.com/profile/".concat(z.usernames.codeforces):(null===(y=z.links)||void 0===y?void 0:y.codeforcesUrl)||"#",stats:null!==(w=z.preferences)&&void 0!==w&&w.showScorecards?null===(S=z.selfReportedStats)||void 0===S?void 0:S.codeforces:null}),(0,o.jsx)(m,{platform:"Striver",link:(null===(C=z.links)||void 0===C?void 0:C.striverSheetUrl)||"#",stats:null})]})})]}),(0,o.jsxs)("div",{className:"card",children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)("h3",{style:{margin:0},children:"My Links"}),(0,o.jsx)("button",{className:"button primary",onClick:()=>B(!0),children:"Edit Links"})]}),(0,o.jsx)("div",{style:{marginTop:12},children:(0,o.jsx)(v,{links:R,loading:O,onEdit:()=>B(!0)})})]}),(0,o.jsx)(k,{open:P,initial:R,onClose:()=>B(!1),onSave:async e=>{try{await f.A.put("/profile/links",{links:e}),B(!1),await G(),Z({open:!0,msg:"Links saved"})}catch(t){}}}),(0,o.jsx)(j,{open:H.open,message:H.msg,onClose:()=>Z({open:!1,msg:""})}),(0,o.jsx)("div",{className:"card",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Weekday distribution"}),(0,o.jsx)(c,{values:X.values,labels:X.labels,width:720,height:160,color:"#f59e0b",showAxis:!0})]})}),(0,o.jsx)("div",{className:"card",children:(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),alert("Profile saved (mock).")},className:"grid",children:[(0,o.jsx)("input",{placeholder:"Name",value:F.name,onChange:e=>E((0,n.A)((0,n.A)({},F),{},{name:e.target.value}))}),(0,o.jsx)("input",{placeholder:"Email",value:F.email,onChange:e=>E((0,n.A)((0,n.A)({},F),{},{email:e.target.value}))}),(0,o.jsx)("button",{type:"submit",children:"Save"})]})})]})}}}]);
//# sourceMappingURL=813.d3ee1bd1.chunk.js.map